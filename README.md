# Отчет по лабораторной работе №3

## Задание

Модифицировать программу из л/р №1 для параллельной работы по
технологии MPI.

## Описание работы

1. Данная программа реализует параллельное умножение квадратных матриц с использованием технологии MPI.

2. Были сгенерированы квадратные матрицы различных размеров: 50, 100, 500, 1000, 1500, 2000, 2500, 3000;

3. Производилось параллельное умножение этих матриц с использованием MPI-программы, в которой каждый процесс обрабатывает часть строк результирующей матрицы;

4. Программа запускалась с разным количеством MPI-процессов (1, 2 и 10);

5. Время выполнения (в миллисекундах) для каждого размера матриц и числа процессов сохранялось в отдельные текстовые файлы (1.txt, 2.txt, 10.txt);

6. Для оценки корректности результатов, произведён постпроцессинг в Python: каждая результатирующая матрица сравнивалась с результатом, вычисленным с помощью библиотеки NumPy. Все расхождения (если таковые были) фиксировались в verification_report.txt;

7. Для анализа производительности были построены графики зависимости времени выполнения от размера матриц для различных чисел MPI-процессов (на Python, с использованием matplotlib).

8. Также программа запускалась на суперкомпьютере Королёв с разным количеством MPI-процессов;

9. Время выполнения (в миллисекундах) для каждого размера матриц и числа процессов аналогично сохранялось в отдельные текстовые файлы;

## Результаты работы

Сравнение результатов умножения матриц: Для матриц всех размеров результаты C++ совпадают с NumPy, что подтверждает корректность вычислений.

### Результаты работы домашнего компьтера

| Размер матрицы | Время (мс) для 1 процесса | Время (мс) для 2 процессов | Время (мс) для 10 процессов |
| -------------- | ------------------------- | -------------------------- | --------------------------- |
| 50             | 2.3097                    | 0.5731                     | 0.4983                      |
| 100            | 15.5925                   | 3.6483                     | 1.8774                      |
| 500            | 1925.96                   | 406.259                    | 157.021                     |
| 1000           | 15437.9                   | 3318.81                    | 1154.11                     |
| 1500           | 51887.9                   | 11456                      | 3860.68                     |
| 2000           | 122899                    | 25960.7                    | 9143.64                     |
| 2500           | 238402                    | 51025.1                    | 17949.3                     |
| 3000           | 417859                    | 87506.1                    | 29999.2                     |

---

### Результаты работы суперкомпьютера Королев

| Размер матрицы | Время (мс) для 2 процессов на Королеве | Время (мс) для 10 процессов на Королеве | Время (мс) для 20 процессов на Королеве |
| -------------- | -------------------------------------- | --------------------------------------- | --------------------------------------- |
| 50             | 0.229486                               | 0.170169                                | 0.089681                                |
| 100            | 0.572109                               | 0.243415                                | 0.171991                                |
| 500            | 37.9783                                | 9.50428                                 | 5.84364                                 |
| 1000           | 284.522                                | 113.989                                 | 37.8446                                 |
| 1500           | 961.768                                | 402.916                                 | 170.787                                 |
| 2000           | 2441.47                                | 946.177                                 | 416.14                                  |
| 2500           | 4807.95                                | 1820.11                                 | 819.325                                 |
| 3000           | 8138.35                                | 3129.14                                 | 1404.93                                 |

---

### График зависимости времени выполнения умножения от размера матрицы для домашнего комьютера:

![alt text](graf_homepc.png)

### График зависимости времени выполнения умножения от размера матрицы для cуперкомьютера Королев:

![alt text](graf.png)

## Вывод

В результате лабораторной работы программа умножения матриц была успешно адаптирована для параллельной работы с использованием MPI. Вычисления выполнены корректно, что подтверждено сравнением с результатами NumPy. С ростом числа процессов наблюдается значительное ускорение как на домашнем компьютере, так и на суперкомпьютере Королёв. MPI позволяет существенно сократить время выполнения, особенно при больших размерах матриц.
